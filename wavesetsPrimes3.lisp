/*
(
s = Server.local;
//b = Buffer.readChannel(s, "/Users/casperschipper/Google\ Drive/GuineaPigs/haaaah.wav", channels:[0]);

b = Buffer.readChannel(s,"/Users/casperschipper/Google\ Drive/GuineaPigs/SHORT_simple2-b-OTHER-3-1.wav", channels:[0],bufnum:0);

b.inspect;
(
SynthDef( \waveSet, { | startFrame = 0, duration = 100, bufNum = 0 , pan = 0, rate = 1 |
	var env = EnvGen.ar( Env.new([0,1,1,0],[0.001,duration / 44100.0,0.001]),doneAction:2);
	Out.ar(0, Pan2.ar( PlayBuf.ar(1, bufNum, rate, startPos:startFrame ) * env, pos: pan) );
}).send(s);
)
)






(
Synth(\waveSet);
)

(
~schmitt_lookahead = { | seq, lookahead = 128 |
	// a schmitt trigger that looks ahead.
	// it switches from zero to one, on a zero crossing, only if the wave reaches a threshold in the lookahead afterwards. It also only switches to 0, if the signal goes low enough.
	var low = -0.1;
	var high = 0.1;
	var state = 0;
	var maximum = 0.0;
	var minimum = 0.0;
	var secondIndex;

	maximum = seq[0..lookahead].maxItem;
	minimum = seq[0..lookahead].minItem;

	seq.collect( {| item, index |
		secondIndex = index + lookahead;
		maximum = max( maximum, seq.wrapAt(secondIndex) );
		minimum = min( minimum, seq.wrapAt(secondIndex) );
		if (state == 0, {
			if ( (item > 0) && (maximum > high), {
				state = 1;
				maximum = 0.0;
			}, { } );
		},{
			if ((item < 0) && (minimum < low) , {
				state = 0;
				minimum = 0.0;
			}, { } );
		});
		state;
	});
};

~detectZeroToOne = { | seq |
	// detects zero to one onsets, turns them into pulses.
	var previous = 0;
	seq.collect( { |item|
		if ( (previous <= 0 ) && (item > 0), { previous = item; 1; }, { previous = item; 0; })
	});
};

~pulseTimer = { | seq |
	// a timer tool,
	// stores the array index when the value is bigger than 0.
	var result = [];
	seq.do( { | it, idx |
		if ( it > 0, {result = result.add(idx); }, { 0 } );
	});
	result;
};

~calcDeltas = { | seq |
		var previous = 0.0;
		seq.collect( { | item |
			var result = item - previous;
			previous = item;
			result;
			});
	};


~printLispArray = { | seq |
	var result = "(";
	seq.do( { |it| result = result + it } );
	result = result + ")";
	result;
};



)

(

f = SoundFile.new;
f.openRead("/Users/casperschipper/Google Drive/GuineaPigs/SHORT_simple2-b-OTHER-3-1.wav";
);
"number of frames in soundfile".postln;
f.numFrames.postln;
z = FloatArray.newClear( f.numFrames );


s.size;

f.readData( z );

z.normalize(-1.0,1.0);
z.plot;

{
var result, deltas;
result = ~schmitt_lookahead.(z);
result = ~detectZeroToOne.(result);
result = ~pulseTimer.(result);
	result = result[0..2048];
	result;
deltas = ~calcDeltas.(result);
result.size.postln;
~printLispArray.(result).postln;
~printLispArray.(deltas).postln;
}.();

)

*/


(# startFrames 
( 11573.0 12556 12582 12798 12862 12875 13018 13078 13093 13192 13204 13244 13328 13398 13408 13511 13525 13704 13717 13755 13830 13843 13884 13952 14023 14035 14048 14073 14149 14162 14175 14187 14202 14231 14353 14365 14466 14479 14503 14517 14531 14616 14661 14668 14708 14787 14841 14864 14965 14975 14990 15016 15080 15130 15167 15228 15268 15281 15295 15321 15395 15432 15447 15461 15576 15584 15597 15702 15715 15779 15795 15895 15905 16021 16032 16059 16170 16197 16210 16239 16249 16322 16333 16344 16358 16372 16384 16456 16501 16509 16548 16618 16628 16640 16667 16692 16792 16805 16815 16830 16844 16871 16894 16932 16944 16959 16973 16982 16999 17071 17083 17096 17108 17122 17134 17161 17197 17222 17234 17248 17262 17272 17288 17306 17361 17373 17386 17398 17412 17424 17439 17451 17475 17513 17525 17539 17554 17564 17579 17651 17663 17677 17704 17715 17730 17743 17777 17802 17828 17844 17852 17869 17940 17952 18004 18063 18076 18113 18138 18154 18213 18238 18253 18265 18291 18331 18357 18396 18421 18434 18456 18496 18509 18520 18534 18544 18559 18573 18633 18646 18672 18685 18695 18708 18771 18784 18795 18809 18821 18905 18917 18944 18958 18984 19018 19028 19042 19056 19067 19082 19092 19108 19120 19145 19173 19212 19225 19236 19253 19296 19312 19324 19336 19350 19361 19376 19388 19435 19475 19488 19515 19545 19559 19573 19586 19598 19613 19625 19639 19652 19672 19687 19698 19725 19738 19751 19763 19810 19822 19836 19848 19862 19878 19887 19903 19915 19937 19951 19964 20003 20016 20027 20043 20070 20087 20114 20127 20142 20152 20167 20179 20194 20229 20256 20269 20282 20294 20334 20355 20380 20408 20421 20473 20528 20545 20598 20615 20627 20638 20650 20712 20726 20739 20766 20780 20793 20828 20863 20886 20902 20919 20956 20980 21011 21025 21072 21089 21111 21131 21146 21200 21240 21269 21316 21332 21354 21374 21390 21443 21457 21498 21511 21558 21578 21597 21607 21625 21632 21685 21699 21718 21725 21740 21753 21801 21819 21839 21874 21928 21943 21971 22000 22066 22083 22104 22122 22179 22192 22204 22247 22258 22301 22314 22331 22371 22425 22439 22451 22495 22563 22578 22619 22670 22685 22714 22741 22809 22824 22855 22914 22929 22959 22982 23053 23066 23096 23156 23170 23183 23224 23293 23307 23336 23397 23411 23424 23464 23504 23533 23546 23575 23615 23637 23650 23703 23750 23773 23814 23856 23877 23890 23943 23989 24012 24053 24096 24117 24130 24183 24228 24252 24294 24355 24367 24421 24489 24530 24590 24597 24655 24698 24724 24764 24822 24834 24890 24938 24959 24998 25063 25125 25174 25193 25289 25301 25357 25424 25523 25535 25593 25706 25760 25771 25833 25946 26010 26072 26191 26317 26459 26560 26808 27027 27267 27524 32319 32333 32343 32366 32378 32390 32399 32411 32421 32432 32443 32453 32464 32474 32486 32497 32508 32517 32552 32565 32768 32830 33083 33104 33229 33279 33332 33401 33446 33468 33489 33516 33573 33595 33643 33691 33714 33729 33760 33815 33842 33887 33956 34009 34033 34065 34136 34204 34259 34283 34290 34318 34386 34452 34510 34544 34570 34638 34671 34704 34732 34767 34797 34825 34859 34893 34926 34952 34987 35020 35053 35083 35101 35115 35152 35180 35210 35246 35278 35311 35348 35359 35373 35415 35446 35468 35489 35507 35537 35572 35599 35613 35636 35679 35754 35772 35800 35826 35834 35860 35879 35901 35944 35969 36021 36037 36065 36090 36105 36121 36148 36172 36214 36238 36282 36306 36335 36363 36385 36422 36444 36490 36512 36542 36561 36609 36659 36711 36757 36774 36821 36866 36890 36940 37002 37032 37064 37111 37141 37211 37316 37376 42341 42346 42451 42512 42529 42557 42612 42647 42731 42771 42857 42878 42909 42942 42996 43022 43066 43095 43144 43178 43209 43234 43263 43288 43302 43334 43360 43412 43446 43477 43502 43532 43557 43571 43603 43628 43653 43682 43717 43749 43773 43803 43841 43872 43898 43924 43953 43979 44022 44046 44075 44113 44143 44171 44196 44226 44253 44296 44320 44349 44385 44416 44450 44469 44502 44529 44575 44625 44666 44694 44722 44753 44810 44857 44906 44947 45010 45041 45101 45144 45231 45271 45293 45534 48546 48574 48583 48614 48637 48640 48650 48673 48687 48704 48726 48740 48764 48789 48795 48834 48854 48932 48935 48959 48998 49011 49584 49858 49868 50036 50131 50310 50364 50464 50589 50643 50744 50866 50912 50963 50994 51029 51079 51149 51181 51201 51251 51279 51362 51399 51432 51463 51485 51536 51564 51599 51645 51685 51715 51770 51824 51858 51887 51934 51976 52014 52201 52273 55904 55907 55927 56015 56053 56655 56887 57045 57223 57290 57347 57447 57482 57512 57628 57674 57726 57765 57795 57827 57856 57913 57960 58011 58049 58112 58145 58189 58248 58271 58299 58338 58400 58437 58482 58539 58564 58590 58632 58672 58690 58797 58832 58930 58984 59014 59271 63397 63664 63854 63881 64016 64069 64104 64138 64256 64303 64325 64355 64393 64427 64455 64479 64533 64558 64592 64614 64643 64681 64718 64743 64767 64823 64848 64882 64904 64932 64972 65009 65057 65114 65171 65195 65223 65264 65301 65407 65464 65490 65559 65600 65615 65671 65703 65858 65910 70099 70358 70393 70481 70542 70582 70602 70706 70799 70827 70858 70877 70920 70949 70983 71007 71075 71105 71135 71154 71195 71218 71261 71353 71383 71413 71472 71496 71539 71578 71607 71632 71661 71699 71723 71752 71820 71853 71887 71916 71950 71979 72000 72039 72105 72136 72171 72198 72233 72264 72325 72347 72391 72422 72458 72484 72522 72550 72610 72677 72699 72744 72771 72810 72838 72898 72965 73032 73060 73098 73128 73187 73229 73255 73322 73354 73388 73422 73481 73518 73549 73616 73654 73680 73721 73780 73847 73913 73955 74001 74080 74113 74147 74215 74305 74378 74446 74604 74687 74816 74931 74991 75305 75629 75960 75967 76282 76291 76490 76578 76600 76676 76750 76824 76853 76863 76879 76898 76924 76934 76940 76962 76972 77002 77005 77013 77016 77042 77067 77199 77234 77245 77257 77266 77278 77298 77339 77377 77400 77406 77418 77430 77454 77471 77478 77490 77506 77515 77522 77532 77535 77546 77561 77577 77595 77612 77624 77632 77639 77647 77673 77681 77697 77705 77740 77758 77763 77769 77777 77781 77820 77845 77851 77931 77952 77955 77967 77977 78001 78031 78042 78051 78056 78064 78076 78082 78095 78103 78109 78125 78137 78142 78155 78165 78177 78189 78200 78203 78230 78244 78279 78295 78303 78313 78323 78328 78380 78392 78404 78416 78424 78453 78460 78467 78477 78482 78504 78540 78552 78555 78561 78570 78600 78608 78620 78628 78636 78654 78667 78673 78679 78709 78715 78728 78744 78763 78780 78800 78812 78823 78834 78842 78852 78859 78869 78875 78878 78892 78909 78913 78921 78930 78934 78946 78954 78966 78968 78975 78980 78990 78996 79002 79015 79024 79029 79044 79052 79058 79067 79070 79079 79090 79106 79111 79117 79130 79143 79157 79166 79171 79174 79189 79211 79222 79227 79238 79244 79263 79274 79284 79293 79301 79308 79315 79335 79342 79346 79357 79361 79369 79377 79390 79401 79412 79418 79422 79429 79435 79440 79444 79449 79458 79471 79479 79485 79494 79500 79505 79508 79515 79523 79536 79557 79563 79570 79573 79581 79584 79595 79599 79608 79612 79623 79626 79636 79639 79644 79646 79650 79657 79668 79674 79688 79698 79704 79722 79731 79736 79744 79750 79757 79763 79778 79784 79787 79799 79807 79812 79821 79826 79834 79840 79849 79861 79870 79880 79886 79894 79897 79904 79911 79917 79922 79924 79935 79937 79941 79945 79952 79959 79967 79991 79994 80010 80014 80038 80042 80048 80062 80072 80093 80101 80106 80113 80121 80128 80138 80144 80162 80169 80176 80185 80189 80196 80200 80212 80222 80232 80245 80253 80262 80265 80273 80277 80282 80299 80311 80316 80322 80333 80336 80353 80359 80364 80373 80377 80387 80394 80397 80409 80417 80423 80430 80449 80463 80470 80475 80483 80487 80513 80524 80532 80539 80548 80552 80587 80598 80608 80615 80622 80638 80660 80665 80683 80700 80713 80721 80725 80735 80751 80763 80767 80776 80781 80803 80810 80817 80827 80834 80844 80865 80876 80878 80889 80894 80915 80922 80954 80964 80969 80977 80984 80991 80997 81019 81040 81055 81062 81075 81082 81090 81095 81102 81111 81139 81151 81164 81171 81186 81210 81217 81222 81231 81234 81238 81244 81252 81258 81272 81276 81284 81288 81292 81296 81303 81306 81316 81323 81328 81334 81337 81350 81354 81378 81381 81395 81403 81410 81418 81424 81433 81445 81448 81455 81461 81475 81481 81492 81495 81501 81504 81508 81522 81526 81534 81537 81547 81567 81572 81599 81607 81610 81614 81621 81636 81648 81653 81670 81677 81682 81686 81702 81709 81715 81723 81726 81734 81740 81744 81756 81763 81767 81774 81778 81783 81792 81795 81803 81810 81818 81832 81854 81860 81863 81870 81873 81881 81888 81892 81896 81905 81911 81918 81922 81925 81929 81943 81950 81957 81963 81973 81981 81994 81999 82032 82045 82056 82063 82085 82089 82098 82105 82112 82119 82136 82140 82147 82157 82170 82176 82183 82188 82198 82210 82213 82224 82232 82242 82256 82267 82271 82278 82301 82308 82316 82322 82326 82337 82340 82355 82361 82364 82377 82385 82390 82399 82407 82423 82432 82442 82453 82461 82465 82474 82489 82508 82512 82523 82537 82547 82550 82558 82564 82567 82570 82591 82602 82611 82623 82630 82633 82642 82657 82660 82670 82684 82691 82701 82706 82712 82723 82726 82729 82734 82740 82748 82758 82769 82773 82779 82788 82794 82802 82805 82814 82819 82825 82829 82834 82842 82848 82856 82870 82877 82884 82890 82898 82908 82918 82930 82941 82947 82952 82958 82961 82974 82978 83001 83005 83017 83022 83030 83038 83046 83053 83057 83060 83066 83068 83079 83091 83098 83106 83112 83121 83132 83136 83144 83154 83161 83164 83175 83185 83201 83205 83214 83219 83233 83247 83255 83269 83273 83281 83289 83294 83298 83306 83309 83317 83323 83332 83337 83346 83353 83360 83367 83379 83385 83391 83400 83409 83422 83426 83430 83442 83447 83456 83460 83463 83471 83473 83483 83491 83497 83508 83513 83518 83524 83533 83536 83546 83557 83574 83583 83594 83598 83603 83614 83622 83631 83637 83652 83663 83669 83673 83681 83689 83692 83706 83718 83731 83738 83744 83748 83752 83764 83767 83771 83775 83778 83784 83790 83800 83805 83808 83818 83830 83832 83842 83847 83851 83855 83863 83865 83875 83880 83895 83903 83913 83918 83929 83933 83944 83954 83958 83967 83974 83979 83990 83996 84002 84007 84013 84018 84032 84056 84064 84072 84083 84089 84094 84101 84105 84115 84132 84146 84154 84166 84177 84188 84195 84205 84212 84232 84239 84248 84258 84265 84272 84280 84287 84297 84300 84306 84313 84318 84323 84333 84336 84340 84346 84355 84365 84376 84384 84390 84399 84412 84419 84422 84432 84441 84447 84451 84454 84461 84466 84475 84483 84488 84494 84500 84504 84509 84515 84522 84530 84540 84558 84563 84573 84582 84590 84599 84604 84613 84621 84633 84635 84643 84650 84654 84661 84663 84674 84681 84690 84693 84699 84704 84712 84717 84720 84726 84738 84751 84762 84771 84775 84782 84791 84800 84808 84815 84817 84821 84842 84849 84851 84861 84867 84879 84889 84899 84912 84921 84949 84952 84958 84965 84969 84977 84989 84996 85003 85019 85022 85026 85030 85041 85050 85057 85060 85071 85076 85083 85090 85093 85109 85112 85116 85122 85126 85134 85139 85153 85160 85163 85174 85184 85192 85199 85207 85226 85230 85234 85236 85247 85260 85271 85274 85296 85305 85311 85317 85320 85324 85327 85334 85340 85344 85349 85358 85363 85367 85372 85378 85395 85400 85407 85412 85419 85428 85434 85439 85444 85448 85455 85458 85469 85485 85491 85496 85509 85519 85523 85531 85545 85551 85556 85559 85569 85580 85584 85590 85593 85606 85612 85623 85634 85640 85651 85655 85665 85687 85692 85700 85703 85710 85714 85725 85733 85743 85755 85765 85776 85779 85786 85792 85799 85804 85811 85820 85827 85837 85848 85851 85859 85862 85867 85874 85880 85892 85896 85900 85904 85925 85931 85944 85947 85952 85957 85962 85966 85973 85979 85986 85992 85999 86009 86012 86020 86023 86035 86041 86049 86055 86063 86071 86077 86084 86091 86097 86105 86112 86126 86130 86135 86147 86157 86168 86179 86189 86193 86198 86203 86220 86224 86231 86236 86244 86254 86257 86264 86267 86271 86278 86282 86291 86298 86306 86309 86319 86327 86329 86337 86341 86349 86352 86360 86376 86378 86391 86398 86407 86411 86419 86422 86428 86434 86440 86447 86456 86460 86469 86478 86483 86492 86495 86514 86519 86530 86534 86542 86549 86557 86560 86570 86576 86581 86586 86594 86598 86603 86608 86615 86621 86627 86629 86636 86643 86647 86655 86658 86664 86670 86676 86680 86688 86694 86697 86708 86714 86722 86725 86733 86741 86748 )
	)
(# delta 
( 11573. 983 26 216 64 13 143 60 15 99 12 40 84 70 10 103 14 179 13 38 75 13 41 68 71 12 13 25 76 13 13 12 15 29 122 12 101 13 24 14 14 85 45 7 40 79 54 23 101 10 15 26 64 50 37 61 40 13 14 26 74 37 15 14 115 8 13 105 13 64 16 100 10 116 11 27 111 27 13 29 10 73 11 11 14 14 12 72 45 8 39 70 10 12 27 25 100 13 10 15 14 27 23 38 12 15 14 9 17 72 12 13 12 14 12 27 36 25 12 14 14 10 16 18 55 12 13 12 14 12 15 12 24 38 12 14 15 10 15 72 12 14 27 11 15 13 34 25 26 16 8 17 71 12 52 59 13 37 25 16 59 25 15 12 26 40 26 39 25 13 22 40 13 11 14 10 15 14 60 13 26 13 10 13 63 13 11 14 12 84 12 27 14 26 34 10 14 14 11 15 10 16 12 25 28 39 13 11 17 43 16 12 12 14 11 15 12 47 40 13 27 30 14 14 13 12 15 12 14 13 20 15 11 27 13 13 12 47 12 14 12 14 16 9 16 12 22 14 13 39 13 11 16 27 17 27 13 15 10 15 12 15 35 27 13 13 12 40 21 25 28 13 52 55 17 53 17 12 11 12 62 14 13 27 14 13 35 35 23 16 17 37 24 31 14 47 17 22 20 15 54 40 29 47 16 22 20 16 53 14 41 13 47 20 19 10 18 7 53 14 19 7 15 13 48 18 20 35 54 15 28 29 66 17 21 18 57 13 12 43 11 43 13 17 40 54 14 12 44 68 15 41 51 15 29 27 68 15 31 59 15 30 23 71 13 30 60 14 13 41 69 14 29 61 14 13 40 40 29 13 29 40 22 13 53 47 23 41 42 21 13 53 46 23 41 43 21 13 53 45 24 42 61 12 54 68 41 60 7 58 43 26 40 58 12 56 48 21 39 65 62 49 19 96 12 56 67 99 12 58 113 54 11 62 113 64 62 119 126 142 101 248 219 240 257 4795 14 10 23 12 12 9 12 10 11 11 10 11 10 12 11 11 9 35 13 203 62 253 21 125 50 53 69 45 22 21 27 57 22 48 48 23 15 31 55 27 45 69 53 24 32 71 68 55 24 7 28 68 66 58 34 26 68 33 33 28 35 30 28 34 34 33 26 35 33 33 30 18 14 37 28 30 36 32 33 37 11 14 42 31 22 21 18 30 35 27 14 23 43 75 18 28 26 8 26 19 22 43 25 52 16 28 25 15 16 27 24 42 24 44 24 29 28 22 37 22 46 22 30 19 48 50 52 46 17 47 45 24 50 62 30 32 47 30 70 105 60 4965 5 105 61 17 28 55 35 84 40 86 21 31 33 54 26 44 29 49 34 31 25 29 25 14 32 26 52 34 31 25 30 25 14 32 25 25 29 35 32 24 30 38 31 26 26 29 26 43 24 29 38 30 28 25 30 27 43 24 29 36 31 34 19 33 27 46 50 41 28 28 31 57 47 49 41 63 31 60 43 87 40 22 241 3012 28 9 31 23 3 10 23 14 17 22 14 24 25 6 39 20 78 3 24 39 13 573 274 10 168 95 179 54 100 125 54 101 122 46 51 31 35 50 70 32 20 50 28 83 37 33 31 22 51 28 35 46 40 30 55 54 34 29 47 42 38 187 72 3631 3 20 88 38 602 232 158 178 67 57 100 35 30 116 46 52 39 30 32 29 57 47 51 38 63 33 44 59 23 28 39 62 37 45 57 25 26 42 40 18 107 35 98 54 30 257 4126 267 190 27 135 53 35 34 118 47 22 30 38 34 28 24 54 25 34 22 29 38 37 25 24 56 25 34 22 28 40 37 48 57 57 24 28 41 37 106 57 26 69 41 15 56 32 155 52 4189 259 35 88 61 40 20 104 93 28 31 19 43 29 34 24 68 30 30 19 41 23 43 92 30 30 59 24 43 39 29 25 29 38 24 29 68 33 34 29 34 29 21 39 66 31 35 27 35 31 61 22 44 31 36 26 38 28 60 67 22 45 27 39 28 60 67 67 28 38 30 59 42 26 67 32 34 34 59 37 31 67 38 26 41 59 67 66 42 46 79 33 34 68 90 73 68 158 83 129 115 60 314 324 331 7 315 9 199 88 22 76 74 74 29 10 16 19 26 10 6 22 10 30 3 8 3 26 25 132 35 11 12 9 12 20 41 38 23 6 12 12 24 17 7 12 16 9 7 10 3 11 15 16 18 17 12 8 7 8 26 8 16 8 35 18 5 6 8 4 39 25 6 80 21 3 12 10 24 30 11 9 5 8 12 6 13 8 6 16 12 5 13 10 12 12 11 3 27 14 35 16 8 10 10 5 52 12 12 12 8 29 7 7 10 5 22 36 12 3 6 9 30 8 12 8 8 18 13 6 6 30 6 13 16 19 17 20 12 11 11 8 10 7 10 6 3 14 17 4 8 9 4 12 8 12 2 7 5 10 6 6 13 9 5 15 8 6 9 3 9 11 16 5 6 13 13 14 9 5 3 15 22 11 5 11 6 19 11 10 9 8 7 7 20 7 4 11 4 8 8 13 11 11 6 4 7 6 5 4 5 9 13 8 6 9 6 5 3 7 8 13 21 6 7 3 8 3 11 4 9 4 11 3 10 3 5 2 4 7 11 6 14 10 6 18 9 5 8 6 7 6 15 6 3 12 8 5 9 5 8 6 9 12 9 10 6 8 3 7 7 6 5 2 11 2 4 4 7 7 8 24 3 16 4 24 4 6 14 10 21 8 5 7 8 7 10 6 18 7 7 9 4 7 4 12 10 10 13 8 9 3 8 4 5 17 12 5 6 11 3 17 6 5 9 4 10 7 3 12 8 6 7 19 14 7 5 8 4 26 11 8 7 9 4 35 11 10 7 7 16 22 5 18 17 13 8 4 10 16 12 4 9 5 22 7 7 10 7 10 21 11 2 11 5 21 7 32 10 5 8 7 7 6 22 21 15 7 13 7 8 5 7 9 28 12 13 7 15 24 7 5 9 3 4 6 8 6 14 4 8 4 4 4 7 3 10 7 5 6 3 13 4 24 3 14 8 7 8 6 9 12 3 7 6 14 6 11 3 6 3 4 14 4 8 3 10 20 5 27 8 3 4 7 15 12 5 17 7 5 4 16 7 6 8 3 8 6 4 12 7 4 7 4 5 9 3 8 7 8 14 22 6 3 7 3 8 7 4 4 9 6 7 4 3 4 14 7 7 6 10 8 13 5 33 13 11 7 22 4 9 7 7 7 17 4 7 10 13 6 7 5 10 12 3 11 8 10 14 11 4 7 23 7 8 6 4 11 3 15 6 3 13 8 5 9 8 16 9 10 11 8 4 9 15 19 4 11 14 10 3 8 6 3 3 21 11 9 12 7 3 9 15 3 10 14 7 10 5 6 11 3 3 5 6 8 10 11 4 6 9 6 8 3 9 5 6 4 5 8 6 8 14 7 7 6 8 10 10 12 11 6 5 6 3 13 4 23 4 12 5 8 8 8 7 4 3 6 2 11 12 7 8 6 9 11 4 8 10 7 3 11 10 16 4 9 5 14 14 8 14 4 8 8 5 4 8 3 8 6 9 5 9 7 7 7 12 6 6 9 9 13 4 4 12 5 9 4 3 8 2 10 8 6 11 5 5 6 9 3 10 11 17 9 11 4 5 11 8 9 6 15 11 6 4 8 8 3 14 12 13 7 6 4 4 12 3 4 4 3 6 6 10 5 3 10 12 2 10 5 4 4 8 2 10 5 15 8 10 5 11 4 11 10 4 9 7 5 11 6 6 5 6 5 14 24 8 8 11 6 5 7 4 10 17 14 8 12 11 11 7 10 7 20 7 9 10 7 7 8 7 10 3 6 7 5 5 10 3 4 6 9 10 11 8 6 9 13 7 3 10 9 6 4 3 7 5 9 8 5 6 6 4 5 6 7 8 10 18 5 10 9 8 9 5 9 8 12 2 8 7 4 7 2 11 7 9 3 6 5 8 5 3 6 12 13 11 9 4 7 9 9 8 7 2 4 21 7 2 10 6 12 10 10 13 9 28 3 6 7 4 8 12 7 7 16 3 4 4 11 9 7 3 11 5 7 7 3 16 3 4 6 4 8 5 14 7 3 11 10 8 7 8 19 4 4 2 11 13 11 3 22 9 6 6 3 4 3 7 6 4 5 9 5 4 5 6 17 5 7 5 7 9 6 5 5 4 7 3 11 16 6 5 13 10 4 8 14 6 5 3 10 11 4 6 3 13 6 11 11 6 11 4 10 22 5 8 3 7 4 11 8 10 12 10 11 3 7 6 7 5 7 9 7 10 11 3 8 3 5 7 6 12 4 4 4 21 6 13 3 5 5 5 4 7 6 7 6 7 10 3 8 3 12 6 8 6 8 8 6 7 7 6 8 7 14 4 5 12 10 11 11 10 4 5 5 17 4 7 5 8 10 3 7 3 4 7 4 9 7 8 3 10 8 2 8 4 8 3 8 16 2 13 7 9 4 8 3 6 6 6 7 9 4 9 9 5 9 3 19 5 11 4 8 7 8 3 10 6 5 5 8 4 5 5 7 6 6 2 7 7 4 8 3 6 6 6 4 8 6 3 11 6 8 3 8 8 7 )

)

(~ width
	(line
		(seq 0 1)
		(seq 3 7 5)))

(~ heavy
	(line
		(ch 8 16 32 64)
		(seq 13 5)))

(~ disturbance
		(rv 
			(st 1) 
			(line (seq 1 1000 1 1 1) (seq 1 4 8 12))))

(fun a
	(line
		(seq 1 2048) 
		(rv 200 500)))

(fun b
	(line
		(seq 2048 1) 
		(rv 100 300)))

(fun other
	(t
		(ch 0.01 2. 0.5 0.75 3.0 4.0 0.1)
		(seq 13 5 7)))

(clone
(sci2
	waveSet
	;indexy 
	(hold
		(seq a b) 
		(seq 
			(hold 
				(st 3)
				(weights ((1 100) (2 1)))) 1 2 1 1 1 2 1))
	(weights ((0.11 100) (0.22 1)))
	:startFrame (index startFrames (~ indexy))
	:duration (clip (* (index delta (~ indexy)) (~ heavy)) 1 44100)
	:pan (t (ch 0.5 -0.5 -1 1 0) (ch 30 40 50))
	:rate (hold (seq 1 1 1 other 1 1 other 1 other 1 1 other) (weights ((1 100) (2 10))))
	:amp (hold (seq 1 1 1 0 1 1 0 1 0 1 1 0) (weights ((1 100) (2 10)))))
10)